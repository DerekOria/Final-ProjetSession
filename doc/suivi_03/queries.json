[{"name":"register-user","string":"INSERT INTO Users (firstname, lastname, birthdate, career, email, password, avatar_url)\r\nVALUES (\"?firstname\", \"?lastname\", \"?birthdate\", \"?career\", \"?email\", SHA2(?password,256), \"?avatar_url\");","type":1},{"name":"login-user","string":"SELECT id, firstname, lastname, career, email, avatar_url\r\nFROM Users\r\nWHERE email=\"?email\" AND password=SHA2(\"?password\", 256);","type":0},{"name":"select-profile","string":"SELECT id, firstname, lastname, career, email, avatar_url\r\nFROM Users\r\nWHERE id = ?user_id;","type":0},{"name":"create-post","string":"INSERT INTO Posts (user_id, community_id, description, image_url, created_at, habit_id)\r\nVALUES (?user_id, ?community_id, '?description', '?image_url', CURRENT_TIMESTAMP, ?habit_id);","type":1},{"name":"select-communities","string":"SELECT \r\n    Communities.id,\r\n    Communities.name\r\nFROM Communities\r\nORDER BY Communities.name ASC;","type":0},{"name":"select-posts","string":"SELECT \r\n    p.id,\r\n    p.description,\r\n    p.image_url,\r\n    p.created_at,\r\n    p.user_id,\r\n    p.habit_id,\r\n    u.firstname,\r\n    u.lastname,\r\n    u.avatar_url,\r\n    c.name AS community\r\nFROM \r\n    Posts p\r\nJOIN \r\n    Users u ON p.user_id = u.id\r\nJOIN \r\n    Communities c ON p.community_id = c.id\r\nORDER BY \r\n    p.created_at DESC;","type":0},{"name":"select-user-posts","string":"SELECT \r\n    p.id,\r\n    p.description,\r\n    p.image_url,\r\n    p.created_at,\r\n    p.user_id,\r\n    p.habit_id,\r\n    u.firstname,\r\n    u.lastname,\r\n    u.avatar_url,\r\n    c.name AS community\r\nFROM \r\n    Posts p\r\nJOIN \r\n    Users u ON p.user_id = u.id\r\nJOIN \r\n    Communities c ON p.community_id = c.id\r\nWHERE \r\n    p.user_id = ?user_id\r\nORDER BY \r\n    p.created_at DESC;","type":0},{"name":"select-habits","string":"SELECT * FROM Habits ORDER BY name ASC;","type":0},{"name":"select-user-habits","string":"SELECT \r\n    H.id AS habit_id,\r\n    H.name,\r\n    H.description,\r\n    H.community_id,\r\n    H.frequency,\r\n    H.user_id,\r\n    C.name AS community_name\r\nFROM Habits H\r\nLEFT JOIN Communities C ON H.community_id = C.id\r\nWHERE H.user_id = ?user_id;","type":0},{"name":"add-user-habit","string":"INSERT INTO UserHabits (user_id, habit_id)\r\nVALUES (?user_id, ?habit_id);","type":1},{"name":"complete-user-habit","string":"UPDATE UserHabits SET is_completed = 1, last_completed_at = CURRENT_TIMESTAMP WHERE user_id = ?user_id AND habit_id = ?habit_id;","type":1},{"name":"create-habit","string":"INSERT INTO Habits (name, description, community_id, frequency, user_id) VALUES ('?name', '?description', ?community_id, '?frequency', ?user_id)","type":1},{"name":"update-post","string":"UPDATE Posts SET description = '?description', image_url = '?image_url', community_id = ?community_id, habit_id = ?habit_id WHERE id = ?post_id;","type":1},{"name":"update-habit","string":"UPDATE Habits SET name = '?name', description = '?description', community_id = ?community_id, frequency = '?frequency' WHERE id = ?habit_id","type":1},{"name":"delete-habit","string":"DELETE FROM Habits WHERE id = ?habit_id","type":1},{"name":"delete-post","string":"DELETE FROM Posts WHERE id = ?post_id;","type":1},{"name":"update-profile-details","string":"UPDATE Users SET firstname = '?firstname', lastname = '?lastname', email = '?email', career = '?career', avatar_url = '?avatar_url' WHERE id = ?user_id;","type":1},{"name":"update-password","string":"UPDATE Users SET password = SHA2(\"?password\", 256) WHERE id = ?user_id;","type":1},{"name":"update-avatar","string":"UPDATE Users SET avatar_url = \"?avatar_url\" WHERE id = ?user_id;","type":1},{"name":"select-last-created-habit","string":"SELECT id FROM Habits WHERE name = \"?name\" AND description = \"?description\" AND community_id = ?community_id ORDER BY id DESC LIMIT 1;","type":0},{"name":"upload-image-post","string":"SELECT \r\n    CONCAT(\"https:\/\/martha.jh.shawinigan.info\/uploads\/\", ?file) AS url,\r\n    1 AS success;","type":0},{"name":"create-comment","string":"INSERT INTO Comments (post_id, user_id, content) VALUES (?post_id, ?user_id, \"?content\")","type":1},{"name":"select-post-comments","string":"SELECT c.id, c.post_id, c.user_id, c.content, c.created_at, u.firstname, u.lastname, u.avatar_url FROM Comments c JOIN Users u ON c.user_id = u.id WHERE c.post_id = ?post_id ORDER BY c.created_at DESC","type":0},{"name":"delete-comment","string":"DELETE FROM Comments WHERE id = ?comment_id AND user_id = ?user_id","type":1},{"name":"count-post-comments","string":"SELECT COUNT(*) as count FROM Comments WHERE post_id = ?post_id","type":0},{"name":"add-reaction","string":"INSERT INTO Reactions (post_id, user_id, reaction_type) VALUES (?post_id, ?user_id, \"?reaction_type\")","type":1},{"name":"remove-reaction","string":"DELETE FROM Reactions WHERE post_id = ?post_id AND user_id = ?user_id AND reaction_type = \"?reaction_type\"","type":1},{"name":"select-post-reactions","string":"SELECT reaction_type, COUNT(*) as count FROM Reactions WHERE post_id = ?post_id GROUP BY reaction_type","type":0},{"name":"select-user-post-reactions","string":"SELECT reaction_type FROM Reactions WHERE post_id = ?post_id AND user_id = ?user_id","type":0},{"name":"count-user-reactions","string":"SELECT COUNT(*) as count FROM Reactions WHERE user_id = ?user_id","type":0}]